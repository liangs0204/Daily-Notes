# 嵌入内容块

## 概述

嵌入内容块主要用于汇总所需内容块，通过 `{{` 和 `}}` 将 SQL 脚本包裹起来并独占一行：`{{ SELECT * FROM blocks WHERE content LIKE '%关键字%' }}`，数据库表请参考这里。#内容块/嵌入#

## 示例

* 查询内容中包含 `内容块` 的列表项：

  ```sql
  {{ SELECT * FROM blocks WHERE content LIKE '%内容块%' AND type = 'i' }}
  ```
* 查询内容中同时包含 `内容块` 和 `引用` 段落块：

  ```sql
  {{ SELECT * FROM blocks WHERE content LIKE '%内容块%' AND content LIKE '%引用%' AND type = 'p') }}
  ```
* 查询内容中同时包含 `内容块` 和 `嵌入` 的标题块并按更新时间降序结果取前 2 条：

  ```sql
  {{ SELECT * FROM blocks WHERE content LIKE '%内容块%' AND content LIKE '%嵌入%' AND type = 'h' ORDER BY updated DESC LIMIT 2 }}
  ```

### 案例一

查询同时包含 `在思源中` 和 `核心概念` 文本的段落块，并排除当前文档（否则当段落块也会包含到结果集中，因为当前段落同样包含了这两个文本，下面的案例类似）：

> 在思源中，唯一重要的核心概念是内容块。通过排版格式即可形成内容块，这样我们就能在块级粒度上对思绪和知识进行整理，同时也能方便长文阅读和输出。

### 案例二

查询包含标签 `#内容块/嵌入#`​ 或 `#内容块/引用#`​ 的段落块：

> 输入 `((` 后将触发内容块引用搜索，继续输入作为搜索关键字，在搜索结果中使用上下键选定后回车就可以完成内容块的引用了。建立好内容块引用后，鼠标悬浮在锚文本上后将弹出预览浮层，展现被引用的内容块（定义块）。#内容块/引用#

### 案例三

有时候我们可能需要随机漫游显示内容块，以方便回顾。

> ```
> path NOT LIKE '/20210808180117-6v0mkxr%'
> id != '20200923234011-ieuun1p'
> ```

> ## 总结
>
> 通过以上保障措施，希望你不再对数据可用性方面产生太多顾虑，请放心使用。
>
> 尽管如此，我们依然建议你参考 321 备份原则（至少 3 个副本、2 种介质和 1 个异地存储）进行定期数据备份。
>
> 欢迎给我们反馈更多建议，数据可用性是重中之重，期待在大家的努力下不断提高它。

> 使用英文圆括号 `()` 可以组合查询的优先级，例如：

### 案例四

查询未完成的任务列表项，这里需要使用 `markdown` 字段而不是 `content` 字段：

> * [ ] 预约牙医

> - [ ] 待办二
